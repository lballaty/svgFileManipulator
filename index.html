<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interactive SVG Pie Chart</title>
    <style>
        /* Basic styling for layout */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 50px;
        }
        form {
            margin-bottom: 30px;
        }
        svg {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Interactive SVG Pie Chart</h1>
    <form id="pieForm">
        <label for="values">Enter comma-separated values:</label>
        <input type="text" id="values" name="values" placeholder="e.g., 10,20,30" required>
        <br><br>
        <label for="colors">Enter comma-separated colors:</label>
        <input type="text" id="colors" name="colors" placeholder="e.g., red,green,blue" required>
        <br><br>
        <button type="button" onclick="updateChart()">Update Chart</button>
    </form>
    <svg id="pieChart" width="300" height="300" viewBox="0 0 32 32"></svg>

    <script>
        function updateChart() {
            // Get input values
            const valuesInput = document.getElementById('values').value;
            const colorsInput = document.getElementById('colors').value;

            // Convert input strings to arrays
            const values = valuesInput.split(',').map(Number);
            const colors = colorsInput.split(',');

            // Validate inputs
            if (values.length !== colors.length) {
                alert('The number of values must match the number of colors.');
                return;
            }
            if (values.some(isNaN)) {
                alert('Please enter valid numbers for values.');
                return;
            }

            // Calculate total value
            const total = values.reduce((acc, val) => acc + val, 0);

            // Get the SVG element
            const svg = document.getElementById('pieChart');
            svg.innerHTML = ''; // Clear previous chart

            // Variables to track drawing position
            let cumulativePercent = 0;

            // Function to convert percentage to SVG arc
            function getCoordinatesForPercent(percent) {
                const x = Math.cos(2 * Math.PI * percent);
                const y = Math.sin(2 * Math.PI * percent);
                return [x, y];
            }

            // Loop through each value to create pie slices
            values.forEach((value, index) => {
                const [startX, startY] = getCoordinatesForPercent(cumulativePercent);

                // Update cumulative percent
                cumulativePercent += value / total;

                const [endX, endY] = getCoordinatesForPercent(cumulativePercent);

                // Determine if the arc should be large or small
                const largeArcFlag = value / total > 0.5 ? 1 : 0;

                // Create the path data for the slice
                const pathData = [
                    `M ${startX} ${startY}`, // Move to start point
                    `A 1 1 0 ${largeArcFlag} 1 ${endX} ${endY}`, // Draw arc
                    'L 0 0', // Draw line to center
                ].join(' ');

                // Create a path element and set its attributes
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathData);
                path.setAttribute('fill', colors[index].trim());
                svg.appendChild(path);
            });
        }
    </script>
</body>
</html>
